<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
  <title>Configuring PowerView</title>
  <meta name="generator" content="Bluefish 2.2.11" />
</head>

<body>
<h1>Configuring PowerView Advanced</h1>

<p>This page lists the advanced PowerView configuration options for more customized setups.</p>

<p></p>

<h2>Configuring Services</h2>

<p>PowerView can capture photo voltic registers from an inverter by intercepting requests sent to 
pvoutput.org <a href="http://pvoutput.org/help.html#api-addstatus" >add status</a>. To setup
PowerView extend the Service property:</p>
<pre>  "Service": {
    "BaseUrl": "http://*:47362",
    "PvOutputFacade": {
      "PvDeviceLabel": "Inverter"
    }
  },</pre>

<p>The PvOutputFacade property declars parameters needed for PowerView to provide the pvoutput.org
<a href="http://pvoutput.org/help.html#api-addstatus" >add status</a> facade. The PvDeviceLabel 
defines the device label name applied for photovoltic readings accepted through the pvoutput.org facade. 
PowerView requires a device id for each device providing data. PowerView can extract the inverter 
device id from the PV data if possible, by default PowerView assumes the device id is contained 
in the "v12" PV data parameterset.</p> 

<p>If the inverter device does not provide its device id PowerView allows
explicit declaring the inverter device id:</p>

<pre>  "Service": {
    "BaseUrl": "http://*:47362",
    "PvOutputFacade": {
      "PvDeviceLabel": "Inverter",
      "PvDeviceId": "12345678"
    }
  },</pre>
	
<p>If at all possible have the inverter provide the device id in the PV data. Explicitly declaring 
the inverter device id should be a last resort. When explicitly declaring 
the inverter device id make sure to update the value if the inverter is replaced. 
Failing to update the inverter device id appropriately will cause wrong energy production summaries
in PowerView.</p>

<h2>Configuring Database</h2>

<p>Normally PowerView will use time zone culture information based on the public ip address. In case that 
does not suffice PowerView allows explicit configuration of the time zone and culture info in the 
Database property:</p>
<pre>  "Database": {
    "Name": "/var/lib/PowerView/PowerView.sqlite3",
    "Region": {
      "TimeZone": "Europe/Copenhagen",
      "CultureInfo": "da-DK"
    }
  },</pre>

<p>Set the TimeZone property value according to the time zone. Note the supported time zone
names vary between Windows and Linux. The time zone is used to determine midnight for calculating
daily production/consumption. Set the CultureInfo element value according to
the preferred language of the PowerView service. Possible culture info values can be found <a href="http://azuliadesigns.com/list-net-culture-country-codes/" >here</a>.
The CultureInfo property is used to determine language for messages generated by the PowerView
service, e.g. emails. The web user interface language is controlled by the web browser.</p>

</body>
</html>
